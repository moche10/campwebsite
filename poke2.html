<!DOCTYPE html>
<html lang="ja">
<head>
  <title>今日のポケモン</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
  <!-- Google Fonts link for Poppins font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    /* Apply Poppins font to the body */
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background-color: #f8c9d6; /* Light pink background */
      margin: 0;
      font-family: 'Poppins', sans-serif; /* Apply Poppins font */
    }

    /* Main container with white background and pink accents */
    main.container {
      text-align: center;
      background-color: #ffffff; /* White background */
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    /* Header and title with pink text */
    h1 {
      font-size: 2.5em;
      color: #d45d6a; /* Pinkish color */
      margin-bottom: 20px;
      font-weight: 600; /* Make the title bolder */
    }

    /* Pokémon name styled with pink color */
    #pokemonName {
      font-size: 2em;
      margin-bottom: 10px;
      color: #d45d6a; /* Pinkish color */
      font-weight: 600; /* Make the Pokémon name bold */
    }

    /* Pokémon image styling with rounded corners and pink border */
    #pokemonImage {
      width: 100%;
      max-width: 300px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      border: 5px solid #f8c9d6; /* Light pink border around the image */
    }

    /* Add a pink button for refreshing the Pokémon */
    button {
      background-color: #d45d6a; /* Pink button */
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      font-size: 1em;
      cursor: pointer;
      margin-top: 20px;
      font-weight: 600;
    }

    button:hover {
      background-color: #c34455; /* Darker pink on hover */
    }
  </style>
</head>
<body>

<main class="container">
  <h1>おすすめポケモン</h1>
  
  <div id="pokemon">
    <h2 id="pokemonName"></h2>
    <!-- Default image if no image available -->
    <img id="pokemonImage" src="https://via.placeholder.com/300?text=No+Image" alt="ポケモンの画像">
  </div>

  <!-- Button to refresh Pokémon -->
  <button onclick="location.reload()">もう一匹見る</button>
</main>

<script>
  // ポケモンの名前を表示する要素を取得
  let pokemonName = document.getElementById('pokemonName');

  // ポケモンの画像を表示する要素を取得
  let pokemonImage = document.getElementById('pokemonImage');

  // ポケモンは現在898種
  let pokemonNumber = Math.floor(Math.random() * 898) + 1;

  // Fetch the main Pokémon data
  fetch(`https://pokeapi.co/api/v2/pokemon/${pokemonNumber}`)
    .then(function (response) {
      if (!response.ok) {
        throw new Error(`Error fetching Pokémon data: ${response.statusText}`);
      }
      return response.json();
    })
    .then(function(data) {
      console.log("Pokémon Data:", data); // Debugging: check the data structure

      // Get the species URL to fetch the species information (including Japanese name)
      const speciesUrl = data.species.url;

      // Fetch species data to get the Japanese name
      fetch(speciesUrl)
        .then(function(speciesResponse) {
          return speciesResponse.json();
        })
        .then(function(speciesData) {
          console.log("Species Data:", speciesData); // Debugging: check the species data

          // Find the Japanese name in the species data
          const japaneseName = speciesData.names.find(name => name.language.name === 'ja');
          
          // Display the Japanese name or fall back to the English name
          pokemonName.textContent = japaneseName ? japaneseName.name : data.name;
        })
        .catch(function(speciesError) {
          console.error("Error fetching species data:", speciesError);
          pokemonName.textContent = data.name; // Fallback to English name if species data is unavailable
        });

      // Display the Pokémon image
      const imageUrl = data.sprites.front_default;

      // If the image URL exists, use it; otherwise, show a placeholder
      pokemonImage.src = imageUrl ? imageUrl : 'https://via.placeholder.com/300?text=No+Image';
    })
    .catch(function(error) {
      console.error("Error fetching Pokémon data:", error);
      pokemonName.textContent = "エラーが発生しました"; // Show an error message in case of failure
      pokemonImage.src = 'https://via.placeholder.com/300?text=No+Image';
    });
</script>

</body>
</html>
